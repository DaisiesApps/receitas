"use strict";(self.webpackChunkreceitas=self.webpackChunkreceitas||[]).push([[768],{2768:(Q,g,i)=>{i.r(g),i.d(g,{RecipeAddComponent:()=>J});var d=i(6814),l=i(6223),u=i(4581),s=i(2296),c=i(5195),T=i(7700),f=i(9157),Z=i(1175),A=i(2032),C=i(8525),v=i(4104),E=i(4486),e=i(5879),p=i(2977),O=i(3680);function x(t,o){if(1&t&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function M(t,o){if(1&t&&(e.TgZ(0,"mat-form-field",19)(1,"mat-label"),e._uU(2,"Type"),e.qZA(),e.TgZ(3,"mat-select",21),e.YNc(4,x,2,2,"mat-option",22),e.qZA()()),2&t){const n=o.ngIf;e.xp6(4),e.Q6J("ngForOf",n)}}function P(t,o){if(1&t&&(e.TgZ(0,"div",14),e._UZ(1,"input",15),e.TgZ(2,"mat-form-field",16)(3,"mat-label"),e._uU(4,"Nom"),e.qZA(),e._UZ(5,"input",17),e.qZA(),e.YNc(6,M,5,1,"mat-form-field",18),e.ALo(7,"async"),e.TgZ(8,"mat-form-field",19)(9,"mat-label"),e._uU(10,"Nombre de personnes"),e.qZA(),e._UZ(11,"input",20),e.qZA()()),2&t){const n=o.ngIf,r=e.oxw();e.xp6(1),e.Q6J("value",n+1),e.xp6(5),e.Q6J("ngIf",e.lcZ(7,2,r.types$))}}function U(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1," Ajouter un ou plusieurs ingr\xe9dients "),e.qZA())}function N(t,o){if(1&t&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function D(t,o){if(1&t&&(e.TgZ(0,"mat-form-field",19)(1,"mat-label"),e._uU(2,"Unit\xe9"),e.qZA(),e.TgZ(3,"mat-select",27),e.YNc(4,N,2,2,"mat-option",22),e.qZA()()),2&t){const n=o.ngIf;e.xp6(4),e.Q6J("ngForOf",n)}}function R(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",24),e._UZ(1,"input",25),e.TgZ(2,"mat-form-field",19)(3,"mat-label"),e._uU(4,"Nom"),e.qZA(),e._UZ(5,"input",17),e.qZA(),e.TgZ(6,"mat-form-field",19)(7,"mat-label"),e._uU(8,"Quantit\xe9"),e.qZA(),e._UZ(9,"input",26),e.qZA(),e.YNc(10,D,5,1,"mat-form-field",18),e.ALo(11,"async"),e.TgZ(12,"button",5),e.NdJ("click",function(){const _=e.CHM(n).index,m=e.oxw();return e.KtG(m.removeIngredient(_))}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()}if(2&t){const n=o.index,r=e.oxw();e.Q6J("formGroupName",n),e.xp6(1),e.Q6J("value",-1),e.xp6(9),e.Q6J("ngIf",e.lcZ(11,3,r.units$))}}function y(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1," Ajouter un ou plusieurs ingr\xe9dients "),e.qZA())}function I(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",28),e._UZ(1,"input",29),e.TgZ(2,"mat-form-field",19)(3,"mat-label"),e._uU(4,"Description"),e.qZA(),e._UZ(5,"input",30),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){const _=e.CHM(n).index,m=e.oxw();return e.KtG(m.removeStep(_))}),e.TgZ(7,"mat-icon"),e._uU(8,"delete"),e.qZA()()()}2&t&&(e.Q6J("formGroupName",o.index),e.xp6(1),e.Q6J("value",-1))}const h=function(){return["/"]};let J=(()=>{var t;class o extends E.D{constructor(r,a,_,m,b,L){super(r,a,_,m),this.mappingService=b,this.router=L}createRecipe(){let a=this.mappingService.mapRecipeValues(this.form.value);this.recipeService.create(a).subscribe({error:_=>console.log("Erreur :"+_),complete:()=>this.router.navigate(["/recipes/",a.id])})}}return(t=o).\u0275fac=function(r){return new(r||t)(e.Y36(l.qu),e.Y36(p.j$),e.Y36(p.SM),e.Y36(p._f),e.Y36(p.yw),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-add"]],standalone:!0,features:[e.qOj,e.jDz],decls:31,vars:11,consts:[[1,"form",3,"formGroup","ngSubmit"],["class","description",4,"ngIf"],[1,"content"],[1,"column"],[1,"column-title"],["mat-icon-button","","type","button",3,"click"],["formArrayName","ingredients",1,"column-content"],[4,"ngIf"],["class","ingredient",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","steps",1,"column-content"],["class","step",3,"formGroupName",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","","type","button",3,"routerLink"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[1,"description"],["type","hidden","formControlName","id",3,"value"],["appearance","outline",1,"form-field","field-name"],["matInput","","placeholder","Nom","formControlName","name"],["appearance","outline","class","form-field",4,"ngIf"],["appearance","outline",1,"form-field"],["matInput","","placeholder","Nombre de personnes","formControlName","numberOfPeople"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ingredient",3,"formGroupName"],["type","hidden","formControlName","ingredientId",3,"value"],["matInput","","placeholder","Quantit\xe9","formControlName","quantity"],["formControlName","unity"],[1,"step",3,"formGroupName"],["type","hidden","formControlName","stepId",3,"value"],["matInput","","placeholder","Description","formControlName","description"]],template:function(r,a){1&r&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.createRecipe()}),e.TgZ(1,"h2"),e._uU(2,"Description"),e.qZA(),e.YNc(3,P,12,4,"div",1),e.ALo(4,"async"),e.TgZ(5,"div",2)(6,"mat-card",3)(7,"mat-card-header",4)(8,"mat-card-title"),e._uU(9,"Ingr\xe9dients"),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){return a.addIngredient()}),e.TgZ(11,"mat-icon"),e._uU(12,"add"),e.qZA()()(),e.TgZ(13,"mat-card-content",6),e.YNc(14,U,2,0,"p",7),e.YNc(15,R,15,5,"div",8),e.qZA()(),e.TgZ(16,"mat-card",3)(17,"mat-card-header",4)(18,"mat-card-title"),e._uU(19,"Pr\xe9paration"),e.qZA(),e.TgZ(20,"button",5),e.NdJ("click",function(){return a.addStep()}),e.TgZ(21,"mat-icon"),e._uU(22,"add"),e.qZA()()(),e.TgZ(23,"mat-card-content",9),e.YNc(24,y,2,0,"p",7),e.YNc(25,I,9,2,"div",10),e.qZA()()(),e.TgZ(26,"div",11)(27,"button",12),e._uU(28,"Annuler"),e.qZA(),e.TgZ(29,"button",13),e._uU(30," Cr\xe9er la recette "),e.qZA()()()),2&r&&(e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,8,a.recipesCount$)),e.xp6(11),e.Q6J("ngIf",0==a.ingredients.controls.length),e.xp6(1),e.Q6J("ngForOf",a.ingredients.controls),e.xp6(9),e.Q6J("ngIf",0==a.steps.controls.length),e.xp6(1),e.Q6J("ngForOf",a.steps.controls),e.xp6(2),e.Q6J("routerLink",e.DdM(10,h)),e.xp6(2),e.Q6J("disabled",!a.isFormValid))},dependencies:[d.ez,d.sg,d.O5,d.Ov,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,u.Bz,u.rH,c.QW,c.a8,c.dn,c.dk,c.n5,T.Is,s.ot,s.lW,s.RK,A.c,A.Nt,f.KE,f.hX,C.LD,C.gD,O.ey,Z.Ps,Z.Hw,v.Nh,f.lN],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;overflow-x:hidden;overflow-y:hidden;padding:16px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow-x:hidden;overflow-y:hidden}.description[_ngcontent-%COMP%]{display:flex;gap:16px}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow-x:hidden;overflow-y:scroll;gap:16px}.content[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.content[_ngcontent-%COMP%]   .column-actions[_ngcontent-%COMP%]{justify-content:flex-end}.form-field[_ngcontent-%COMP%]{flex:1}.field-name[_ngcontent-%COMP%]{flex:2}.ingredient[_ngcontent-%COMP%], .step[_ngcontent-%COMP%]{display:flex;gap:16px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:16px}"]}),o})()}}]);